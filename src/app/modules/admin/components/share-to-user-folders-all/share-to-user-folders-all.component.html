<div class="card-block card-share">
  <!-- <table class="table mb-0 tb--custom">
    <thead>
      <tr>
        <th>
          <span [innerHTML]="'TABLE.COLUMNS.USER' | translate: params"></span>
        </th>
        <th class="tb-permission">
          <span [innerHTML]="'TABLE.COLUMNS.PERMISSION' | translate: params"></span>
        </th>
      </tr>
      <tr>
        <td>
          <tag-input [placeholder]="'+ ' + ('ADMIN.SETTINGS.COLLAPSES.USER' | translate: params)"
            [secondaryPlaceholder]="'SEARCHS.USER' | translate: params" [allowDupes]="false" [(ngModel)]="userListForShare"
            [onlyFromAutocomplete]="false" (keyup.enter)="onEnter()" (onAdd)="onItemAdded($event)">
            <tag-input-dropdown [matchingFn]="autoCompleteUserListMatching" [appendToBody]="false" [autocompleteObservable]="ENABLE_GLOBAL_ADDRESSBOOK ? autocompleteUserList : null">
              <ng-template let-item="item" let-index="index">
                <div class="row">
                  <div class="col-md-2">
                    <div class="user-avt">
                      <img [src]="item.templateData.avatar_url" />
                    </div>
                  </div>
                  <div class="col-md-10">
                    <div class="user-detail">
                      <strong>{{ item.templateData.name }}</strong>
                    </div>
                    <div class="user-detail">
                      ({{ item.templateData.email }})
                    </div>
                  </div>
                </div>
              </ng-template>
            </tag-input-dropdown>
          </tag-input>
        </td>
        <td class="tb-permission">
          <div class="row">
            <div class="col-7">
              <select2 [data]="exampleData" [options]="options" [value]="permission" [cssImport]="true" [width]="155"
                (valueChanged)="changedSettingPermission($event)"></select2>
            </div>
            <div class="col-5">
              <button type="button" class="btn btn-info waves-effect" (click)="submitShareToUser()">
                <span [innerHTML]="'BUTTONS.SUBMIT' | translate: params"></span>
              </button>
            </div>
          </div>
        </td>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of listUserShared; let index=index">
        <td>{{ (data.user_name) || (data.username) || (data.owner)}}</td>
        <td class="tb-permission">
          <div class="row">
            <div class="col-8">
              <select2 [data]="exampleData" [options]="options" [value]="data.permission" [cssImport]="true" [width]="155"
                (valueChanged)="changedPermissionData($event, data.user_email)"></select2>
            </div>
            <div class="col-4">
              <button class="btn btn-danger btn--icon-text waves-effect" (click)="confirmDeleteUserShare(data)">
                <i class="fal fa-trash"></i>
              </button>
            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table> -->

  <div>
    <div>
      <strong> {{ 'TABLE.COLUMNS.USER' | translate: params }}</strong>
      <span>
        <tag-input [placeholder]="'+ ' + ('ADMIN.SETTINGS.COLLAPSES.USER' | translate: params)" [secondaryPlaceholder]="'SEARCHS.USER' | translate: params"
          [allowDupes]="false" [(ngModel)]="userListForShare" [onlyFromAutocomplete]="false" (keyup.enter)="onEnter()"
          (onAdd)="onItemAdded($event)">
          <tag-input-dropdown [matchingFn]="autoCompleteUserListMatching" [appendToBody]="false"
            [autocompleteObservable]="ENABLE_GLOBAL_ADDRESSBOOK ? autocompleteUserList : null">
            <ng-template let-item="item" let-index="index">
              <div class="row">
                <div class="col-md-2">
                  <div class="user-avt">
                    <img [src]="item.templateData.avatar_url" />
                  </div>
                </div>
                <div class="col-md-10">
                  <div class="user-detail">
                    <strong>{{ item.templateData.name }}</strong>
                  </div>
                  <div class="user-detail">
                    ({{ item.templateData.email }})
                  </div>
                </div>
              </div>
            </ng-template>
          </tag-input-dropdown>
        </tag-input>
      </span>
    </div>

    <div class="wrapper">
      <strong>{{ 'TABLE.COLUMNS.PERMISSION' | translate: params }}</strong>
      <div class="d-flex">
        <select2 [data]="exampleData" [options]="options" [value]="permission" [cssImport]="true" [width]="155"
          (valueChanged)="changedSettingPermission($event)"></select2>
      </div>
      <!-- <div class="wrapper__history">
        <strong class="history--custom">{{ 'TABLE.COLUMNS.HISTORY_PERMISSION' | translate }}</strong>
        <div class="checkbox">
          <label><input [(ngModel)]="viewHistory" type="checkbox" name="setPermission" (change)="onChangePermission()">
            {{'PERMISSIONS.VIEW_HISTORY' | translate}}</label>
        </div>
        <div class="checkbox">
          <label><input [(ngModel)]="viewSnapshot" type="checkbox" name="setPermission" (change)="onChangePermission()">{{'PERMISSIONS.VIEW_SNAPSHOT'
            | translate}}</label>
        </div>
        <div class="checkbox">
          <label><input [(ngModel)]="restoreSnapshot" type="checkbox" name="setPermission" (change)="onChangePermission()">{{'PERMISSIONS.RESTORE_SNAPSHOT'
            | translate}}</label>
        </div>
      </div> -->
      <div class="wrapper__btn">
        <button type="button" class="btn btn-info waves-effect btn--custom" (click)="submitShareToUser()">
          <span [innerHTML]="'BUTTONS.SUBMIT' | translate: params"></span>
        </button>
      </div>

    </div>

    <div class="clearfix">
    </div>

    <ng-container *ngFor="let data of listUserShared; let index=index">
      <div class="d-flex fl--custom">
        <div class="wrapper__user">
          <p class="p--bold"> {{ 'TABLE.COLUMNS.USER' | translate: params }}</p>
          <span>{{ (data.user_name) || (data.username) || (data.owner)}}</span>
        </div>
        <div class="wrapper__per">
          <p class="p--bold">{{ 'TABLE.COLUMNS.PERMISSION' | translate: params }}</p>
          <div class="d-flex">
            <span class="select--elm">
              <select2 [data]="exampleData" [options]="options" [value]="data.permission" [cssImport]="true" [width]="155"
                (valueChanged)="changedPermissionData($event, data.user_email)"></select2>
            </span>
            <span class="btn--elm">
              <button class="btn btn-danger btn--icon-text waves-effect" (click)="confirmDeleteUserShare(data)">
                <i class="fal fa-trash"></i>
              </button>
            </span>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
